{"version":3,"sources":["../../src/app.js","../../src/app.html","../../src/environment.js","../../src/home.js","../../src/home.html","../../src/login.js","../../src/login.html","../../src/main.js","../../src/resources/index.js"],"names":["App","configureRouter","config","router","title","options","pushState","map","route","name","moduleId","nav","debug","testing","Oidc","UserManager","HttpClient","userManager","httpClient","error","message","displayUserInfo","callApi","fetch","then","response","json","forecasts","result","JSON","stringify","catch","getUser","user","profile","console","log","login","signinRedirect","logout","signoutRedirect","Login","Router","doLogin","response_mode","signinRedirectCallback","navigateToRoute","configure","aurelia","use","standardConfiguration","feature","developmentLogging","environment","plugin","container","urlPrefix","host","dataset","authority","client_id","redirect_uri","response_type","scope","post_logout_redirect_uri","registerInstance","useStandardConfiguration","withBaseUrl","withDefaults","credentials","headers","withInterceptor","request","append","access_token","start","setRoot"],"mappings":";;;;;;MAAaA,G;;;;;;;WAETC,e,GAAA,yBAAgBC,MAAhB,EAAwBC,MAAxB,EAAgC;AAC5BD,MAAAA,MAAM,CAACE,KAAP,GAAe,gBAAf;AACAF,MAAAA,MAAM,CAACG,OAAP,CAAeC,SAAf,GAA2B,IAA3B;AAEAJ,MAAAA,MAAM,CAACK,GAAP,CAAW,CACP;AAAEC,QAAAA,KAAK,EAAE,EAAT;AAAaC,QAAAA,IAAI,EAAE,MAAnB;AAA2BC,QAAAA,QAAQ,EAAE,MAArC;AAA6CC,QAAAA,GAAG,EAAE,IAAlD;AAAwDP,QAAAA,KAAK,EAAE;AAA/D,OADO,EAEP;AAAEI,QAAAA,KAAK,EAAE,OAAT;AAAkBC,QAAAA,IAAI,EAAE,OAAxB;AAAiCC,QAAAA,QAAQ,EAAE,OAA3C;AAAoDC,QAAAA,GAAG,EAAE,KAAzD;AAAgEP,QAAAA,KAAK,EAAE;AAAvE,OAFO,CAAX;AAKA,WAAKD,MAAL,GAAcA,MAAd;AACH,K;;;;;;;ACZL;;;;;;iBCAe;AACbS,IAAAA,KAAK,EAAE,IADM;AAEbC,IAAAA,OAAO,EAAE;AAFI,G;;;;;;;;ACEf;;;;;;MAGab,G,WADZ,8BAAOc,oBAAKC,WAAZ,EAAyBC,8BAAzB,C;;;AAEG,iBAAYC,WAAZ,EAAyBC,UAAzB,EAAqC;AACjC,WAAKC,KAAL,GAAa,EAAb;AACA,WAAKC,OAAL,GAAe,EAAf;AAEA,WAAKH,WAAL,GAAmBA,WAAnB;AACA,WAAKC,UAAL,GAAkBA,UAAlB;AAEA,WAAKG,eAAL;AACH;;;;WAEDC,O,GAAA,mBAAU;AAAA;;AACN,WAAKJ,UAAL,CACKK,KADL,CACW,iBADX,EAEKC,IAFL,CAEU,UAAAC,QAAQ;AAAA,eAAIA,QAAQ,CAACC,IAAT,EAAJ;AAAA,OAFlB,EAGKF,IAHL,CAGU,UAAAG,SAAS,EAAI;AACf,QAAA,KAAI,CAACR,KAAL,GAAa,EAAb;AACA,QAAA,KAAI,CAACC,OAAL,GAAe,0BAAf;AACA,QAAA,KAAI,CAACQ,MAAL,GAAcC,IAAI,CAACC,SAAL,CAAeH,SAAf,EAA0B,IAA1B,EAAgC,CAAhC,CAAd;AACH,OAPL,EAQKI,KARL,CAQW,UAAAZ,KAAK,EAAI;AACZ,QAAA,KAAI,CAACA,KAAL,4BAAoCA,KAApC;AACA,QAAA,KAAI,CAACC,OAAL,GAAe,EAAf;AACH,OAXL;AAYH,K;;WAEDC,e,GAAA,2BAAkB;AAAA;;AACd,WAAKJ,WAAL,CAAiBe,OAAjB,GACKR,IADL,CACU,UAAAS,IAAI,EAAI;AACV,YAAIA,IAAJ,EAAU;AACN,UAAA,MAAI,CAACd,KAAL,GAAa,EAAb;AACA,UAAA,MAAI,CAACC,OAAL,wBAAkCa,IAAI,CAACC,OAAL,CAAazB,IAA/C;AACA0B,UAAAA,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACC,OAAjB;AACH,SAJD,MAIO;AACH,UAAA,MAAI,CAACf,KAAL,GAAa,qBAAb;AACA,UAAA,MAAI,CAACC,OAAL,GAAe,EAAf;AACH;AACJ,OAVL,EAWKW,KAXL,CAWW,UAAAZ,KAAK,EAAI;AACZ,QAAA,MAAI,CAACA,KAAL,iCAAyCA,KAAzC;AACA,QAAA,MAAI,CAACC,OAAL,GAAe,EAAf;AACH,OAdL;AAeH,K;;WAEDiB,K,GAAA,iBAAQ;AACJ,WAAKpB,WAAL,CAAiBqB,cAAjB;AACH,K;;WAEDC,M,GAAA,kBAAS;AACL,WAAKtB,WAAL,CAAiBuB,eAAjB;AACH,K;;;;;;ACvDL;;;;;;ACAA;;;;;;MAKaC,K,WADZ,8BAAOC,qBAAP,C;;;AAEG,mBAAYvC,MAAZ,EAAoB;AAChB,WAAKA,MAAL,GAAcA,MAAd;AACA,WAAKgB,KAAL,GAAa,EAAb;AAEA,WAAKwB,OAAL;AACH;;;;WAEDA,O,GAAA,mBAAU;AAAA;;AACN,UAAI7B,oBAAKC,WAAT,CAAqB;AAAE6B,QAAAA,aAAa,EAAE;AAAjB,OAArB,EACKC,sBADL,GAEKrB,IAFL,CAEU,YAAM;AACR,QAAA,KAAI,CAACL,KAAL,GAAa,EAAb;;AACA,QAAA,KAAI,CAAChB,MAAL,CAAY2C,eAAZ,CAA4B,MAA5B;AACH,OALL,EAKOf,KALP,CAKa,UAAAZ,KAAK,EAAI;AACd,QAAA,KAAI,CAACA,KAAL,4BAAoCA,KAApC;AACH,OAPL;AAQH,K;;;;;;ACtBL;;;;;;ACGA;AACA;;;;AAJA;AACA;AAMO,WAAS4B,SAAT,CAAmBC,OAAnB,EAA4B;AAC/BA,IAAAA,OAAO,CAACC,GAAR,CACKC,qBADL,GAEKC,OAFL,CAEa,WAFb;AAIAH,IAAAA,OAAO,CAACC,GAAR,CAAYG,kBAAZ,CAA+BC,qBAAYzC,KAAZ,GAAoB,OAApB,GAA8B,MAA7D;;AAEA,QAAIyC,qBAAYxC,OAAhB,EAAyB;AACrBmC,MAAAA,OAAO,CAACC,GAAR,CAAYK,MAAZ,CAAmB,iBAAnB;AACH;;AAED,QAAMC,SAAS,GAAGP,OAAO,CAACO,SAA1B;AACA,QAAMC,SAAS,GAAGR,OAAO,CAACS,IAAR,CAAaC,OAAb,CAAqBF,SAAvC;AACArB,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCY,OAAO,CAACS,IAAR,CAAaC,OAA7C,EAb+B,CAe/B;;AACA,QAAIzC,WAAW,GAAG,IAAIH,oBAAKC,WAAT,CAAqB;AACnC4C,MAAAA,SAAS,EAAKH,SAAL,WAD0B;AAEnCI,MAAAA,SAAS,EAAE,gBAFwB;AAGnCC,MAAAA,YAAY,EAAKL,SAAL,iBAHuB;AAInCM,MAAAA,aAAa,EAAE,MAJoB;AAKnCC,MAAAA,KAAK,EAAE,4BAL4B;AAMnCC,MAAAA,wBAAwB,EAAKR,SAAL;AANW,KAArB,CAAlB;AAQAD,IAAAA,SAAS,CAACU,gBAAV,CAA2BnD,oBAAKC,WAAhC,EAA6CE,WAA7C,EAxB+B,CA0B/B;;AACA,QAAIC,UAAU,GAAG,IAAIF,8BAAJ,EAAjB;AACAE,IAAAA,UAAU,CAAC6B,SAAX,CAAqB,UAAA7C,MAAM,EAAI;AAC3BA,MAAAA,MAAM,CACDgE,wBADL,GAEKC,WAFL,CAEoBX,SAFpB,cAGKY,YAHL,CAGkB;AACVC,QAAAA,WAAW,EAAE,aADH;AAEVC,QAAAA,OAAO,EAAE;AACL,8BAAoB;AADf;AAFC,OAHlB,EASKC,eATL,CASqB;AACbC,QAAAA,OADa,mBACLA,QADK,EACI;AACb,iBAAOvD,WAAW,CAACe,OAAZ,GACFR,IADE,CACG,UAAAS,IAAI,EAAI;AACVuC,YAAAA,QAAO,CAACF,OAAR,CAAgBG,MAAhB,CAAuB,eAAvB,cAAkDxC,IAAI,CAACyC,YAAvD;;AACA,mBAAOF,QAAP;AACH,WAJE,CAAP;AAKH;AAPY,OATrB;AAkBH,KAnBD;AAoBAjB,IAAAA,SAAS,CAACU,gBAAV,CAA2BjD,8BAA3B,EAAuCE,UAAvC;AAEA8B,IAAAA,OAAO,CAAC2B,KAAR,GAAgBnD,IAAhB,CAAqB;AAAA,aAAMwB,OAAO,CAAC4B,OAAR,EAAN;AAAA,KAArB;AACH;;;;;;;;AC1DM,WAAS7B,SAAT,CAAmB7C,MAAnB,EAA2B,CAChC;AACD","file":"app-bundle.js","sourcesContent":["export class App {\r\n\r\n    configureRouter(config, router) {\r\n        config.title = 'Aurelia Client';\r\n        config.options.pushState = true;\r\n\r\n        config.map([\r\n            { route: '', name: 'home', moduleId: 'home', nav: true, title: 'Home' },\r\n            { route: 'login', name: 'login', moduleId: 'login', nav: false, title: 'Login' }\r\n        ]);\r\n\r\n        this.router = router;\r\n    }\r\n}","<template>\r\n    <require from=\"bootstrap/css/bootstrap.min.css\"></require>\r\n    <main class=\"container\">\r\n        <div>\r\n            <router-view></router-view>\r\n        </div>\r\n    </main>\r\n</template>\r\n","export default {\r\n  debug: true,\r\n  testing: true\r\n};\r\n","import { HttpClient } from 'aurelia-fetch-client';\r\nimport { inject } from 'aurelia-framework';\r\nimport Oidc from 'oidc-client';\r\n\r\n@inject(Oidc.UserManager, HttpClient)\r\nexport class App {\r\n    constructor(userManager, httpClient) {\r\n        this.error = '';\r\n        this.message = '';\r\n\r\n        this.userManager = userManager;\r\n        this.httpClient = httpClient;\r\n\r\n        this.displayUserInfo();\r\n    }\r\n\r\n    callApi() {\r\n        this.httpClient\r\n            .fetch('weatherforecast')\r\n            .then(response => response.json())\r\n            .then(forecasts => {\r\n                this.error = '';\r\n                this.message = 'Data loaded successfully';\r\n                this.result = JSON.stringify(forecasts, null, 2);\r\n            })\r\n            .catch(error => {\r\n                this.error = `Error loading data: ${error}`;\r\n                this.message = '';\r\n            });\r\n    }\r\n\r\n    displayUserInfo() {\r\n        this.userManager.getUser()\r\n            .then(user => {\r\n                if (user) {\r\n                    this.error = '';\r\n                    this.message = `User logged in: ${user.profile.name}`;\r\n                    console.log(user.profile);\r\n                } else {\r\n                    this.error = 'User not logged in!';\r\n                    this.message = '';\r\n                }\r\n            })\r\n            .catch(error => {\r\n                this.error = `Error loading user data: ${error}`;\r\n                this.message = '';\r\n            });\r\n    }\r\n\r\n    login() {\r\n        this.userManager.signinRedirect();\r\n    }\r\n\r\n    logout() {\r\n        this.userManager.signoutRedirect();\r\n    }\r\n}\r\n","<template>\r\n    <h1>Aurelia Client</h1>\r\n\r\n    <hr />\r\n\r\n    <div if.bind=\"error\" class=\"alert alert-danger\">${error}</div>\r\n    <div if.bind=\"message\" class=\"alert alert-info\">${message}</div>\r\n\r\n    <pre if.bind=\"result\"><code>${result}</code></pre>\r\n\r\n    <hr />\r\n\r\n    <button class=\"btn btn-secondary\" click.delegate=\"login()\">Login</button>\r\n    <button class=\"btn btn-secondary\" click.delegate=\"callApi()\">Call API</button>\r\n    <button class=\"btn btn-secondary\" click.delegate=\"logout()\">Logout</button>\r\n\r\n</template>\r\n","import Oidc from 'oidc-client';\r\nimport { inject } from 'aurelia-framework';\r\nimport { Router } from 'aurelia-router';\r\n\r\n@inject(Router)\r\nexport class Login {\r\n    constructor(router) {\r\n        this.router = router;\r\n        this.error = '';\r\n\r\n        this.doLogin();\r\n    }\r\n\r\n    doLogin() {\r\n        new Oidc.UserManager({ response_mode: 'query' })\r\n            .signinRedirectCallback()\r\n            .then(() => {\r\n                this.error = '';\r\n                this.router.navigateToRoute('home');\r\n            }).catch(error => {\r\n                this.error = `Error logging user: ${error}`;\r\n            });\r\n    }\r\n}\r\n","<template>\r\n    <div class=\"alert alert-info\" if.bind=\"!error\">\r\n        Logging in...\r\n    </div>\r\n    <div class=\"alert alert-danger\" if.bind=\"error\">\r\n        ${error}\r\n    </div>\r\n</template>\r\n","// regenerator-runtime is to support async/await syntax in ESNext.\r\n// If you don't use async/await, you can remove regenerator-runtime.\r\nimport 'regenerator-runtime/runtime';\r\nimport environment from './environment';\r\nimport Oidc from 'oidc-client';\r\nimport { HttpClient } from 'aurelia-fetch-client';\r\n\r\nexport function configure(aurelia) {\r\n    aurelia.use\r\n        .standardConfiguration()\r\n        .feature('resources');\r\n\r\n    aurelia.use.developmentLogging(environment.debug ? 'debug' : 'warn');\r\n\r\n    if (environment.testing) {\r\n        aurelia.use.plugin('aurelia-testing');\r\n    }\r\n\r\n    const container = aurelia.container;\r\n    const urlPrefix = aurelia.host.dataset.urlPrefix;\r\n    console.log('Element dataset:', aurelia.host.dataset);\r\n\r\n    // Register UserManager instance with Aurelia container\r\n    let userManager = new Oidc.UserManager({\r\n        authority: `${urlPrefix}:44396`,\r\n        client_id: 'aurelia-client',\r\n        redirect_uri: `${urlPrefix}:44336/login`,\r\n        response_type: 'code',\r\n        scope: 'openid profile weather-api',\r\n        post_logout_redirect_uri: `${urlPrefix}:44336/`\r\n    });\r\n    container.registerInstance(Oidc.UserManager, userManager);\r\n\r\n    // Register HttpClient instance with Aurelia container\r\n    let httpClient = new HttpClient();\r\n    httpClient.configure(config => {\r\n        config\r\n            .useStandardConfiguration()\r\n            .withBaseUrl(`${urlPrefix}:44373/`)\r\n            .withDefaults({\r\n                credentials: 'same-origin',\r\n                headers: {\r\n                    'X-Requested-With': 'Fetch'\r\n                }\r\n            })\r\n            .withInterceptor({\r\n                request(request) {\r\n                    return userManager.getUser()\r\n                        .then(user => {\r\n                            request.headers.append('Authorization', `Bearer ${user.access_token}`);\r\n                            return request;\r\n                        });\r\n                }\r\n            });\r\n    });\r\n    container.registerInstance(HttpClient, httpClient);\r\n\r\n    aurelia.start().then(() => aurelia.setRoot());\r\n}\r\n","export function configure(config) {\r\n  //config.globalResources([]);\r\n}\r\n"]}